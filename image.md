要件定義書

1. プロジェクト概要

1.1 背景
	•	バナーが「当たっている」(成果が良い) ものを気軽にChatworkで共有し、それを自動的にスプレッドシートに蓄積したい。
	•	これまではバナー情報を都度手動でまとめていたため手間がかかる。
	•	また、一覧管理だけでなく、スプレッドシートのセル内で直接バナー画像プレビューを表示して、視覚的にわかりやすく管理したい。

1.2 目的
	•	Chatworkへの投稿をトリガーとして、画像、LP URL、ジャンルを自動的にGoogle スプレッドシートへ記録し、バナー情報を一元管理できるようにする。
	•	セル内に画像プレビューを表示し、一覧で見やすくすることで、バナーの比較やクオリティ確認を容易にする。

1.3 ゴール
	1.	Chatworkに
	•	①画像(バナー)
	•	②LPのURL
	•	③ジャンル
を投稿すれば、自動的にスプレッドシートが更新される。
	2.	更新されたスプレッドシート上では、ジャンル別に分かれたシートにバナー情報を一覧化し、セル内に画像プレビューを表示してビジュアルに確認できる。
	3.	1枚目のシートを**「目次シート」**とし、各ジャンルへのリンクを掲載してアクセス性を高める。

2. スコープ

2.1 対象範囲
	•	Chatwork: 画像(バナー)とテキスト(①LPのURL、②ジャンル)投稿を行うチャットツール。
	•	Google スプレッドシート: バナー情報が自動的に反映される管理表で、セル内プレビューを表示する。
	•	システム連携部分（GAS）: Chatworkの投稿内容を受け取り、スプレッドシートを更新し、画像プレビューを設定する部分。
	•	運用マニュアル: 最終的に利用者がこの仕組みをどう使うかを説明する。

3. 前提・制約
	1.	Chatwork API/Webhook を利用
	•	Chatwork APIを利用して、特定ルームに投稿されたメッセージ（画像やテキスト）を取得できること。
	2.	Google アカウント権限
	•	GASでスプレッドシート操作が可能なアカウント権限を持っていること。
	3.	画像プレビューの仕組み
	•	Google スプレッドシートの =IMAGE("URL") 関数、もしくは Apps Scriptの機能を用いて、セルにプレビューを表示する。
	•	画像が外部URLの場合、公開リンク or アクセス権限が必要。場合によってはGoogleドライブに保存しリンクを発行することも検討。
	4.	運用環境
	•	Google Workspace もしくは、GASが利用可能な個人アカウント。
4. 詳細要件

4.1 機能要件
	1.	Chatworkメッセージの取得
	•	特定ルームへの投稿をトリガーとし、以下を解析する:
	•	画像URL(添付ファイル)
	•	LPのURL
	•	ジャンル(例:「美容」「金融」「旅行」など)
	2.	画像の取り扱い
	•	画像のプレビュー表示のため、下記のいずれかの方法を選択：
	1.	Chatwork画像の直リンクをそのまま使用する
	•	ただしチャットツールによっては有効期限切れ等の問題が発生する可能性がある。
	2.	Google ドライブにアップロードして共有リンクを発行する
	•	ドライブ上の共有リンクなら =IMAGE("共有リンク") でプレビュー表示しやすい。
	3.	スプレッドシートへのデータ登録
	•	入力項目:
	•	日時（投稿時刻）
	•	画像のURL（またはドライブURL）
	•	セル内画像プレビュー
	•	LP URL
	•	ジャンル
	•	ジャンル別シートに自動追記。
	•	もし該当ジャンルのシートが存在しない場合は、新規シート作成やエラー通知を検討。
	•	1枚目は「目次シート」。ジャンル別シートへのリンクを一覧で表示。
